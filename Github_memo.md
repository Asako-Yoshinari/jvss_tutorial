# Githubの使い方
[TOC]
## 1_はじめに
ソースコードの管理、開発のシステム化、共有化を念頭におくとVersion Control System(VCS)の利用は現代では不可欠の要素である。VCSにはいくつかの種類があり、
[subversion](https://subversion.apache.org), [mercurial](https://www.mercurial-scm.org), [git](https://git-scm.com) などが挙げられる。特に最後にあげたgitは様々なweb repositoryを介して利用可能であることから初心者を含めて広く用いられている。

web repositoryとはweb上に設置された「コードの貯蔵庫」を意味する。つまり、クラウド上にソースコードを保存することができる。さらにソースコードだけでなくgitなどVCSで管理されたソースコードの改変履歴も同時に記録することができるため、大きなバグが発見された場合、ある種の機能を含む・含まないなどバージョンを複数管理したい、などの要求をウェブ上でかつグラフィカルに取り扱える点が優れている。gitをベースとしたweb repositoryとして最も有名なものが[github](https://github.com)である。そのほか、[gitlab](https://about.gitlab.com)や[gitweb](https://git-scm.com/book/en/v2/Git-on-the-Server-GitWeb)、[gitea](https://gitea.io/en-us/), [Gogs](https://gogs.io), [Bitbucket](https://bitbucket.org/product/)などが2021/07現在では確認できる。

かつてはgithubとgitlabの大きい違いとしてプライベートリポジトリの編集人数制限が挙げられた。プライベートリポジトリとは一般公開の逆で、アクセスできるユーザーに制限をかけたリポジトリである。githubには編集人数に制限がかかっていたがgitlabは制限がなく、この点でgitlabが優位であったが、2021年現在ではgithubもこの利用制限を撤廃しているため、ユーザー数の多さやGUIの使いやすさなどからgithubをベースとして解説する。

なおGithubには[Github Desktop](https://desktop.github.com)というシンプルなgit管理用のGUIが用意されているため、初心者はこちらを利用するとわかりやすい。

## 2_Gitの主要な操作
githubでソースを管理する際には、ローカルとリモートという概念が重要である。ローカルは私や読者の方が直接利用しているハードウェア上のリポジトリ環境のことで、リモートはクラウド（Web）上のリポジトリ環境を差す。リモートリポジトリは公開設定に応じて複数人が参照可能であり、ローカルリポジトリは自分だけが参照可能、そして両者をうまいことやりとりしてみんなでコード管理しようね、というのが大まかな思想である。そのため、ローカルでのリポジトリ単位の作業と  ローカル・リモート間のやりとりという２つの作業が存在する。

### 2-1_リポジトリ
ローカル・リモートどちらもそうだが、リポジトリを用いたソースコード管理は**コミット: commit**と呼ばれる単位から構成されている。gitによるコード管理はコミットの記録列であると要約することができる。コミットは前後でのコード差分＋変更点の説明で構成されている。このコミットと呼ばれる単位を時系列的に並べた記録がリポジトリには保存されると理解していただきたい。なお、リポジトリ自体を作成する作業を**イニット**(init)という。これはリポジトリという台帳自体を作成する作業と理解すれば良い。
もう一つ作業を進める上での大きなポイントとして**ブランチ**という概念がある。ブランチはコミットの列における分岐列を意味する。つまりメインで開発していたけれど、途中で機能追加をしたいためにメインの列とは切り離して記録を付けたい場合に分岐をもうけて作業を進める、といった具合にブランチを作成して管理する。これにより、追加要素を加える前と加えた後のコードの混在を避けてプロジェクト管理を効率化することができる。現在設定されているブランチの先端を**ヘッド:Head**と呼ぶ。
概念的なことを並べて書いたが、実際にこういった情報の実態はどこに格納されるのだろうか？答えは、プロジェクトディレクトリの直下にある`.git/`というフォルダである。そもそもパッケージの開発プロジェクトや修論・博論・論文などの文献作成プロジェクト、もしくはWebPageなどの**プロジェクト**の実態は、一連のファイルが保存された**ディレクトリ** であるという点も注意されたい。

### 2-2_リモートとの通信
リモート・ローカル間のコミュニケーションは以下のようなものが挙げられる：
1. リモートからデータをローカルに丸っとコピーする（**クローン**: clone）
2. ローカルのコミット列をリモートに反映（**プッシュ**: push）
3. リモートに追加されたコミット列をローカルに反映（**プル**: pull）

基礎的にはこれくらいで十分。プロジェクト管理を進める際にはブランチ管理で難しいことが多発するものと思われるので、問題が生じた際に考えてみたい。

### 2-3_mainとorigin/mainの違い
Black lives matter運動を転機にmaster, slaveという奴隷制度を想起させる単語は排除の方向にある。そのためこれまでmaster と呼ばれていたbranchも最近ではmainなどと変更されているので注意。さて、ローカルとリモートという概念を説明したが、以下のようなbranchのmerge, rebaseはローカル内でも行うし、ローカル・リモート間でも行うことができる。

1. あるブランチの更新列を対象となるブランチに反映させる（**マージ**: merge）
2. リモートにあるブランチの情報を拾ってくる（**フェッチ**: fetch）
3. (**リベース**: rebase)

ブランチの管理は大変重要で、ローカルのブランチ情報がリモートにいつの間にか反映されていなかったということが十分起こりうる。そのため、リモート・ローカルにおけるブランチがどこに今あるかを常に把握しておくべきである。

実はリモートのブランチ情報もローカルに保存されている。これがorigin/mainというブランチである。これらは、`git list -a`で確認することができる。このorigin以下のブランチとローカルなブランチが一致していないとリモートとローカルでチグハグになっているということになる。一致させるにはズレているローカルブランチをリモートにプッシュしてやれば良い。
